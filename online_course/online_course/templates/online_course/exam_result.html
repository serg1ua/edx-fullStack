{% extends "online_course/base.html" %}

<!-- title -->
{% block title %} Exam result {% endblock %}
<!-- exam result -->
{% block exam_result %}
<div class="container-fluid">
  <h4>Course: {{ course.name }}</h4>
  {% if grade > 80 %}
  <div class="alert alert-success">
    <strong>Congratulations, {{ user.first_name }}!&nbsp;</strong>You have passed the exam and
    completed the course with score {{ grade }}/100
  </div>
  {% else %}
  <div class="alert alert-danger">
    <strong>Failed&nbsp;</strong>
    Sorry, {{ user.first_name }}! You have failed exam with score {{ grade }}/100
  </div>
  <a class="btn btn-link text-danger" href="{% url 'online_course:course_details' course.id %}"
    >Re-test</a
  >
  {% endif %}
  <div class="card-columns-vertical mt-1">
    <h5>Exam results</h5>
    {% for result in results %}
    <div class="card mt-1">
      <div class="card-header">
        <h5>{{ result.question_text }}</h5>
      </div>
      <div class="card-body">
        <!-- correct choices -->
        {% for correct_choice in result.truthy_choices %}
        <p class="correct-text">
          <strong>Correct answer: {{ correct_choice.choice_text }}</strong>
        </p>
        {% endfor %}
        <!-- incorrect choices -->
        {% for incorrect_choice in result.falsy_choices %} {% if incorrect_choice.checked %}
        <p class="incorrect-text">
          <strong>Incorrect answer: {{ incorrect_choice.choice_text }}</strong>
        </p>
        {% else %}
        <p>
          <strong>{{ incorrect_choice.choice_text }}</strong>
        </p>
        {% endif %} {% endfor %}
        <!-- unchecked choices -->
        {% for unchecked_choice in result.unchecked_choices %}
        <p class="unchecked-text">
          <strong>Not selected: {{ unchecked_choice.choice_text }}</strong>
        </p>
        {% endfor %}
      </div>
    </div>
    {% endfor %}
  </div>
</div>
{% endblock %}
